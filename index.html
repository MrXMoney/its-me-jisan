<!DOCTYPE html><html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>টাস্ক ভিত্তিক ইনকাম</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script type="module" src="firebase.js"></script>
</head>
<body class="bg-gray-100 font-sans">
  <div class="max-w-md mx-auto p-4">
    <h1 class="text-2xl font-bold text-center mb-4">টাস্ক ভিত্তিক ইনকাম সাইট</h1><!-- Registration/Login -->
<div id="registrationSection" class="bg-white p-4 rounded shadow mb-4 hidden">
  <h2 class="text-xl font-semibold mb-2">একাউন্ট রেজিস্ট্রেশন</h2>
  <form id="registerForm">
    <input type="text" id="name" placeholder="আপনার নাম" class="w-full p-2 border rounded mb-2" required>
    <input type="email" id="email" placeholder="ইমেইল" class="w-full p-2 border rounded mb-2" required>
    <input type="password" id="password" placeholder="পাসওয়ার্ড" class="w-full p-2 border rounded mb-2" required>
    <input type="text" id="referralCode" placeholder="রেফার কোড (যদি থাকে)" class="w-full p-2 border rounded mb-2">
    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">রেজিস্ট্রেশন করুন</button>
  </form>
</div>

<!-- Manual Payment Modal -->
<div id="paymentSection" class="hidden bg-white p-4 rounded shadow mb-4">
  <h3 class="text-lg font-bold mb-2">একাউন্ট এক্টিভ করতে পেমেন্ট করুন</h3>
  <p class="text-sm mb-2">পেমেন্ট নাম্বার (বিকাশ/নগদ/রকেট/উপায়): <strong>017XXXXXXXX</strong></p>
  <form id="paymentForm">
    <input type="text" id="senderNumber" placeholder="যে নাম্বার থেকে টাকা পাঠানো হয়েছে" class="w-full p-2 border rounded mb-2" required>
    <input type="text" id="amount" placeholder="টাকার পরিমাণ" class="w-full p-2 border rounded mb-2" required>
    <input type="text" id="transactionId" placeholder="লেনদেন আইডি" class="w-full p-2 border rounded mb-2" required>
    <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded w-full">রিকুয়েস্ট পাঠান</button>
  </form>
</div>

<!-- Task Section -->
<div id="taskSection" class="hidden bg-white p-4 rounded shadow mb-4">
  <h2 class="text-xl font-semibold mb-2">আজকের টাস্ক</h2>
  <ul class="list-disc list-inside">
    <li><a href="https://your-adsterra-direct-link.com" target="_blank" class="text-blue-500">Pop Ad লিংক</a></li>
    <li><a href="#" onclick="alert('Banner Ad');" class="text-blue-500">Banner Ad কাজ</a></li>
    <li><a href="https://your-direct-link.com" target="_blank" class="text-blue-500">Direct লিংক</a></li>
  </ul>
</div>

<!-- Referral Info -->
<div id="referralSection" class="hidden bg-white p-4 rounded shadow">
  <h2 class="text-xl font-semibold mb-2">রেফার সিস্টেম</h2>
  <p>আপনার রেফার কোড: <strong id="userReferral">USER123</strong></p>
  <p>নতুন সদস্য যদি আপনার কোড দিয়ে একাউন্ট এক্টিভ করে, আপনি বোনাস পাবেন।</p>
</div>

  </div>  <script type="module">
    import { auth, createUserWithEmailAndPassword, db, ref, set, get } from './firebase.js';

    const registerForm = document.getElementById('registerForm');
    const paymentForm = document.getElementById('paymentForm');
    const registrationSection = document.getElementById('registrationSection');
    const paymentSection = document.getElementById('paymentSection');
    const taskSection = document.getElementById('taskSection');
    const referralSection = document.getElementById('referralSection');
    const userReferral = document.getElementById('userReferral');

    let currentUserId = null;

    window.addEventListener('DOMContentLoaded', () => {
      registrationSection.classList.remove('hidden');
    });

    registerForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const referralCode = document.getElementById('referralCode').value;

      try {
        const userCredential = await createUserWithEmailAndPassword(auth, email, password);
        const userId = userCredential.user.uid;
        currentUserId = userId;
        const userRef = ref(db, 'users/' + userId);
        await set(userRef, {
          name: name,
          email: email,
          referralCode: referralCode,
          isActive: false
        });
        registrationSection.classList.add('hidden');
        paymentSection.classList.remove('hidden');
      } catch (error) {
        alert("রেজিস্ট্রেশন সমস্যা: " + error.message);
      }
    });

    paymentForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const senderNumber = document.getElementById('senderNumber').value;
      const amount = document.getElementById('amount').value;
      const transactionId = document.getElementById('transactionId').value;

      try {
        const paymentRef = ref(db, 'payments/' + currentUserId);
        await set(paymentRef, {
          senderNumber,
          amount,
          transactionId,
          approved: false
        });
        alert("পেমেন্ট রিকুয়েস্ট পাঠানো হয়েছে। এডমিন অনুমোদন দিলে একাউন্ট এক্টিভ হবে।");
        paymentSection.classList.add('hidden');
      } catch (error) {
        alert("পেমেন্ট সমস্যা: " + error.message);
      }
    });
  </script></body>
</html>
