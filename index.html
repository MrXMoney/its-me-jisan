<!-- MyCash User Panel: index.html --><!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MyCash - Earn Money</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
</head>
<body>
  <div id="app">
    <h1>Welcome to MyCash</h1>
    <button id="loginBtn">Login with Google</button>
    <div id="dashboard" style="display: none;">
      <h2>Your Balance: <span id="balance">0</span>à§³</h2>
      <div id="taskCards"></div>
      <button onclick="showWithdrawForm()">Withdraw</button>
    </div>
    <div id="withdrawForm" style="display: none;">
      <input type="text" id="method" placeholder="Method (bKash/Nagad)" />
      <input type="text" id="number" placeholder="Your Number" />
      <input type="number" id="amount" placeholder="Amount" />
      <button onclick="submitWithdraw()">Submit</button>
    </div>
  </div>  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDdQuA4izCiIYWJ3hNWLHVbglW5Ig2DHrM",
      authDomain: "i-bank-bd.firebaseapp.com",
      databaseURL: "https://i-bank-bd-default-rtdb.firebaseio.com",
      projectId: "i-bank-bd",
      storageBucket: "i-bank-bd.firebasestorage.app",
      messagingSenderId: "815383083283",
      appId: "1:815383083283:web:6ea26839b3a0bf22a982e6",
      measurementId: "G-CQWXB3KLWJ"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    const loginBtn = document.getElementById("loginBtn");
    const dashboard = document.getElementById("dashboard");
    const balanceText = document.getElementById("balance");

    loginBtn.onclick = async () => {
      const provider = new firebase.auth.GoogleAuthProvider();
      const result = await auth.signInWithPopup(provider);
      const user = result.user;
      const userRef = db.collection("users").doc(user.uid);
      const doc = await userRef.get();
      if (!doc.exists) {
        await userRef.set({ name: user.displayName, balance: 0 });
      }
      loadDashboard(user.uid);
    };

    async function loadDashboard(uid) {
      loginBtn.style.display = "none";
      dashboard.style.display = "block";
      const userRef = db.collection("users").doc(uid);
      const doc = await userRef.get();
      const balance = doc.data().balance;
      balanceText.innerText = balance;
    }

    async function showWithdrawForm() {
      document.getElementById("withdrawForm").style.display = "block";
    }

    async function submitWithdraw() {
      const method = document.getElementById("method").value;
      const number = document.getElementById("number").value;
      const amount = parseInt(document.getElementById("amount").value);
      const user = auth.currentUser;
      if (!user || !method || !number || isNaN(amount)) return;
      await db.collection("withdraw_requests").add({
        uid: user.uid,
        method,
        number,
        amount,
        status: "pending",
        time: new Date().toISOString()
      });
      alert("Withdraw request submitted");
    }
  </script></body>
</html>
